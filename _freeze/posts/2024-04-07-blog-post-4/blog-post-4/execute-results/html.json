{
  "hash": "71d4822393531185850817d5bdf28afb",
  "result": {
    "markdown": "---\ntitle: \"blog post 4\"\nauthor: \"\"\ndate: \"2024-04-07\"\ndate-modified: \"2024-04-07\"\ndraft: FALSE\n---\n\n\n**Impact of Gender on Fatalities in Different States**\nThis plot focuses to explore the relationship between gender and fatalities across different states. This could help identify if certain states have more pronounced gender disparities in police-related fatalities.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.4.4     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.0\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n:::\n\n```{.r .cell-code}\nprc <- read_csv(\"dataset/police_fatalities.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRows: 12491 Columns: 12\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (8): Name, Gender, Race, Date, City, State, Manner_of_death, Armed\ndbl (2): UID, Age\nlgl (2): Mental_illness, Flee\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n\n```{.r .cell-code}\nprc %>%\n  na.omit() %>%\n  count(State, Gender) %>%\n  ggplot(aes(x = reorder(State, n), y = n, fill = Gender)) +\n  geom_bar(stat = \"identity\", position = \"dodge\") +\n  labs(title = \"Police Fatalities by State and Gender\",\n       x = \"State\",\n       y = \"Number of Fatalities\") +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1)) +\n  scale_fill_brewer(palette = \"Set2\")\n```\n\n::: {.cell-output-display}\n![](blog-post-4_files/figure-html/unnamed-chunk-1-1.png){width=672}\n:::\n:::\n\n**Yearly Trend of Police Fatalities by Race**\nThis plot the trend of police fatalities over the years, broken down by race. This can show if certain races have been more affected over time and how the trends have changed.\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(lubridate)\nlibrary(readr)\n\npolice_data_clean <- read_csv(\"dataset/police_fatalities.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRows: 12491 Columns: 12\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (8): Name, Gender, Race, Date, City, State, Manner_of_death, Armed\ndbl (2): UID, Age\nlgl (2): Mental_illness, Flee\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n\n```{.r .cell-code}\nannual_trends_by_race <- police_data_clean %>%\n  mutate(Date = dmy(Date), Year = year(Date)) %>%\n  drop_na(Year, Race) %>%\n  count(Year, Race) %>%\n  spread(key = Race, value = n, fill = 0) %>%\n  gather(key = 'Race', value = 'Fatalities', -Year)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: There was 1 warning in `mutate()`.\nℹ In argument: `Date = dmy(Date)`.\nCaused by warning:\n!  7488 failed to parse.\n```\n:::\n\n```{.r .cell-code}\nannual_trends_by_race %>%\n  ggplot(aes(x = Year, y = Fatalities, color = Race)) +\n  geom_line() + \n  geom_point() + \n  labs(title = \"Yearly Trend of Police Fatalities by Race\",\n       x = \"Year\",\n       y = \"Number of Fatalities\") +\n  theme_minimal() +\n  scale_color_brewer(palette = \"Set1\") +\n  theme(legend.title = element_blank()) \n```\n\n::: {.cell-output-display}\n![](blog-post-4_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(lubridate)\nlibrary(ggplot2)\nlibrary(broom)\n\nlibrary(nnet)\n\ndata <- read.csv(\"dataset/police_fatalities.csv\") %>%\n  mutate(\n    Date = mdy(Date), # Convert to Date format if it's in 'm/d/Y' format\n    Gender = as.factor(Gender),\n    Race = as.factor(Race),\n    Manner_of_death = as.factor(Manner_of_death),\n    Armed = as.factor(Armed),\n    Mental_illness = as.factor(Mental_illness),\n    Flee = as.factor(Flee)\n  )\n\nsummary_statistics <- data %>%\n  summarise(\n    Average_Age = mean(Age, na.rm = TRUE),\n    SD_Age = sd(Age, na.rm = TRUE),\n    Count = n()\n  )\n\nage_histogram <- ggplot(data, aes(x = Age)) +\n  geom_histogram(binwidth = 5, fill = \"blue\", color = \"black\") +\n  theme_minimal() +\n  labs(title = \"Distribution of Age\", x = \"Age\", y = \"Count\")\n\ndeath_by_demographics <- ggplot(data, aes(x = Race, fill = Gender)) +\n  geom_bar(position = \"dodge\") +\n  theme_minimal() +\n  labs(title = \"Manner of Death by Gender and Race\", x = \"Race\", y = \"Count\")\n\nlogistic_model <- glm(Armed ~ Age + Gender + Race + Mental_illness, \n                      data = data, family = \"binomial\")\nlogistic_model_summary <- summary(logistic_model)\n\nmultinom_model <- multinom(Manner_of_death ~ Age + Gender + Race + Mental_illness, data = data)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# weights:  48 (33 variable)\ninitial  value 16993.196279 \niter  10 value 3526.384408\niter  20 value 3018.452673\niter  30 value 2924.878850\niter  40 value 2899.497411\niter  50 value 2899.477616\niter  60 value 2899.473481\niter  60 value 2899.473459\niter  60 value 2899.473459\nfinal  value 2899.473459 \nconverged\n```\n:::\n\n```{.r .cell-code}\nmultinom_model_summary <- summary(multinom_model)\n\nlogistic_model_table <- tidy(logistic_model)\n\nprint(age_histogram)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: Removed 233 rows containing non-finite values (`stat_bin()`).\n```\n:::\n\n::: {.cell-output-display}\n![](blog-post-4_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n\n```{.r .cell-code}\nprint(death_by_demographics)\n```\n\n::: {.cell-output-display}\n![](blog-post-4_files/figure-html/unnamed-chunk-3-2.png){width=672}\n:::\n\n```{.r .cell-code}\nprint(logistic_model_table)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 11 × 5\n   term               estimate std.error statistic  p.value\n   <chr>                 <dbl>     <dbl>     <dbl>    <dbl>\n 1 (Intercept)        -0.693     0.919      -0.754 4.51e- 1\n 2 Age                 0.00396   0.00146     2.71  6.70e- 3\n 3 GenderFemale        0.374     0.922       0.406 6.85e- 1\n 4 GenderMale          0.518     0.918       0.564 5.73e- 1\n 5 RaceAsian           0.0773    0.157       0.492 6.23e- 1\n 6 RaceBlack           0.248     0.0523      4.73  2.24e- 6\n 7 RaceHispanic        0.124     0.0583      2.12  3.38e- 2\n 8 RaceNative          0.238     0.180       1.32  1.87e- 1\n 9 RaceOther          -0.262     0.293      -0.894 3.72e- 1\n10 RaceWhite           0.350     0.0465      7.53  5.10e-14\n11 Mental_illnessTRUE  0.216     0.0456      4.73  2.23e- 6\n```\n:::\n:::\n",
    "supporting": [
      "blog-post-4_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}